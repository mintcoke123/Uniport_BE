spring:
  application:
    name: uniport

  datasource:
    # env: SPRING_DATASOURCE_URL, SPRING_DATASOURCE_USERNAME, SPRING_DATASOURCE_PASSWORD
    url: ${SPRING_DATASOURCE_URL:jdbc:h2:file:./data/testdb;DB_CLOSE_DELAY=-1;AUTO_SERVER=TRUE}
    driver-class-name: org.h2.Driver
    username: ${SPRING_DATASOURCE_USERNAME:sa}
    password: ${SPRING_DATASOURCE_PASSWORD:}

  h2:
    console:
      enabled: true
      path: /h2-console

  jpa:
    defer-datasource-initialization: true
    show-sql: true
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: true
        default_batch_fetch_size: 100
    database-platform: org.hibernate.dialect.H2Dialect
    open-in-view: false

# 로깅 (SQL 가독성)
logging:
  level:
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

# CORS (env: APP_CORS_ALLOWED_ORIGINS. 프로덕션에서는 허용 오리진 제한)
app:
  cors:
    allowed-origins: ${APP_CORS_ALLOWED_ORIGINS:http://localhost:3000,http://127.0.0.1:3000}

# JWT (env: JWT_SECRET 필수 권장. 프로덕션에서는 반드시 32자 이상 랜덤 값 설정)
jwt:
  secret: ${JWT_SECRET:uniport-jwt-secret-key-change-in-production-min-256bits}
  expiration-ms: ${JWT_EXPIRATION_MS:86400000} # 24시간

# KIS Open API (env: KIS_API_APPKEY, KIS_API_APPSECRET. 설정 시에만 시세/거래량 API 사용)
kis:
  api:
    base-url: ${KIS_API_BASE_URL:https://openapi.koreainvestment.com:9443}
    base-url-mock: ${KIS_API_BASE_URL_MOCK:https://openapivts.koreainvestment.com:29443}
    appkey: ${KIS_API_APPKEY:}
    appsecret: ${KIS_API_APPSECRET:}
    use-mock: ${KIS_API_USE_MOCK:false}

# 시드/어드민 (env: UNIPORT_ADMIN_EMAIL, UNIPORT_ADMIN_PASSWORD, UNIPORT_SEED_TEST_USER_ENABLED)
uniport:
  admin:
    email: ${UNIPORT_ADMIN_EMAIL:admin@uniport.com}
    password: ${UNIPORT_ADMIN_PASSWORD:uniport}
  seed:
    test-user-enabled: ${UNIPORT_SEED_TEST_USER_ENABLED:true}
